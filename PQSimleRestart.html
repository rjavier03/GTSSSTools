<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PQ Stop/Start Generator</title>
<style>
  :root{
    --bg:#071025;
    --panel:#0b1220;
    --muted:#94a3b8;
    --accent:#7dd3fc;
    --border: rgba(255,255,255,0.08);
    --text:#e6eef6;
    --output-bg:#020617;
    --note-bg:#0e182e;
  }
  html,body{
    height:100%;margin:0;
    background:linear-gradient(180deg,var(--bg),#071a2a);
    color:var(--text);
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial
  }
  .wrap{
    max-width:880px;margin:40px auto;padding:24px;
    background:var(--panel);
    border-radius:12px;
    box-shadow:0 8px 30px rgba(2,6,23,.6);
    border:1px solid var(--border);
  }
  h1{margin:0 0 10px;font-size:18px;color:var(--accent)}
  p.lead{margin:0 0 16px;color:var(--muted);font-size:13px}
  input[type="text"]{
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid var(--border);
    background:#031022;
    color:var(--text);
    font-family:ui-monospace,monospace;
    font-size:14px;
    box-sizing:border-box;
  }
  button{
    background:linear-gradient(180deg,#0b1220,#071022);
    border:1px solid var(--border);
    color:var(--text);
    padding:10px 12px;
    border-radius:8px;
    cursor:pointer;
  }
  button.primary{background:linear-gradient(180deg,#007b8f,#006a7a);font-weight:600}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}
  .block{
    background:var(--output-bg);
    border-radius:8px;
    padding:12px;
    border:1px solid var(--border);
    font-family:ui-monospace,monospace;
    font-size:13px;
    color:#cdeffc;
    white-space:pre-wrap;
    min-height:200px;
  }
  .label{font-weight:600;color:var(--accent);margin-bottom:8px;font-size:14px}
  .hint{margin-top:8px;color:var(--muted);font-size:12px}
  .row{display:flex;gap:10px;margin-top:12px;align-items:center}
  .radio-group{display:flex;gap:16px;align-items:center;margin-bottom:10px}
  .radio-group label{color:var(--muted);font-size:13px;cursor:pointer}
  .instructions{
    background:var(--note-bg);
    border:1px solid var(--border);
    border-radius:8px;
    padding:16px;
    margin-top:28px;
    font-size:13px;
    color:#d4e2f0;
    line-height:1.6;
  }
  .instructions h2{
    color:var(--accent);
    font-size:15px;
    margin:0 0 6px;
  }
  .instructions code{
    background:#020b1a;
    padding:2px 4px;
    border-radius:4px;
    color:#aefaff;
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>PQ Stop / Start Generator</h1>
  <p class="lead">Enter comma-separated values like <code>1</code>, <code>UPLOAD 1</code>, or <code>3, UPLOAD 2</code>. Then choose between EU or AU mode.</p>

  <div class="radio-group">
    <label><input type="radio" name="region" value="EU" checked> EU</label>
    <label><input type="radio" name="region" value="AU"> AU</label>
  </div>

  <input id="input" type="text" placeholder="e.g. 1, UPLOAD 1, 2" autocomplete="off">

  <div class="row">
    <button id="genBtn" class="primary">Generate</button>
    <button id="clearBtn">Clear</button>
    <button id="copyStopBtn">Copy Stop</button>
    <button id="copyStartBtn">Copy Start</button>
  </div>

  <div class="grid">
    <div>
      <div class="label">STOP Commands</div>
      <div id="stopOut" class="block">// STOP commands will appear here</div>
    </div>
    <div>
      <div class="label">START Commands</div>
      <div id="startOut" class="block">// START commands will appear here</div>
    </div>
  </div>

  <div class="hint">Tip: Whitespace is ignored. <strong>UPLOAD</strong> auto-converts to <strong>UPLOADED</strong>.  
  Region selection changes prefix: <strong>EU</strong> = EUV2..., <strong>AU</strong> = V2...</div>

  <div class="instructions">
    <h2>ðŸ“˜ LoadBalancer Instructions</h2>
    <p><strong>To Stop LoadBalancer</strong> (open <code>stop.sh</code> to see list of services):</p>
    <ol>
      <li>Change folders: <code>cd /home/developer/Signal</code></li>
      <li>Run: <code>touch StopV2LoadBalancer_UPLOADED_1.sig</code></li>
      <li>Run: <code>touch StopV2LoadBalancer_UPLOADED_2.sig</code></li>
    </ol>
    <p><strong>To Check:</strong> <code>ps -awux | grep V2</code></p>
    <p><strong>To Start LoadBalancer</strong> (open <code>start.sh</code> to see list of services):</p>
    <ol>
      <li>Change folders: <code>cd /home/developer/Program/ProcessQueue</code></li>
      <li>Run: <code>./EUV2LoadBalancer UPLOADED 1</code></li>
      <li>Run: <code>./EUV2LoadBalancer UPLOADED 2</code></li>
    </ol>
  </div>
</div>

<script>
(function(){
  const input = document.getElementById('input');
  const genBtn = document.getElementById('genBtn');
  const clearBtn = document.getElementById('clearBtn');
  const stopOut = document.getElementById('stopOut');
  const startOut = document.getElementById('startOut');
  const copyStopBtn = document.getElementById('copyStopBtn');
  const copyStartBtn = document.getElementById('copyStartBtn');
  const regionRadios = document.querySelectorAll('input[name="region"]');

  function getRegion(){
    return Array.from(regionRadios).find(r => r.checked)?.value || 'EU';
  }

  function normalizeToken(t){
    return t.replace(/[\t\r\n]+/g,' ').replace(/\s+/g,' ').trim();
  }

  function normalizeAction(a){
    const up = a.toUpperCase();
    if(up === 'UPLOAD') return 'UPLOADED';
    return up;
  }

  function generate(tokens, region){
    const stopLines = [];
    const startLines = [];
    const prefix = (region === 'AU') ? '' : 'EU';

    for(const raw of tokens){
      const t = normalizeToken(raw);
      if(!t) continue;
      if(/^[0-9]+$/.test(t)){
        stopLines.push(`# touch StopV2DocHandler_${t}.sig`);
        startLines.push(`# (./${prefix}V2DocHandler ${t} &)`);
        continue;
      }
      const m = t.match(/^([A-Za-z_]+)\s+([0-9]+)$/);
      if(m){
        const act = normalizeAction(m[1]);
        const num = m[2];
        stopLines.push(`# touch StopV2LoadBalancer_${act}_${num}.sig`);
        startLines.push(`# (./${prefix}V2LoadBalancer ${act} ${num} &)`);
        continue;
      }
      const m2 = t.match(/^([A-Za-z_]+)[_\-]?([0-9]+)$/);
      if(m2){
        const act = normalizeAction(m2[1]);
        const num = m2[2];
        stopLines.push(`# touch StopV2LoadBalancer_${act}_${num}.sig`);
        startLines.push(`# (./${prefix}V2LoadBalancer ${act} ${num} &)`);
        continue;
      }
      stopLines.push(`# Skipping invalid input: "${t}"`);
      startLines.push(`# Skipping invalid input: "${t}"`);
    }
    return {stop: stopLines.join('\n') || '// None', start: startLines.join('\n') || '// None'};
  }

  function generateOutput(){
    const parts = (input.value || '').split(',').map(p=>p.trim()).filter(Boolean);
    const region = getRegion();
    const res = generate(parts, region);
    stopOut.textContent = res.stop;
    startOut.textContent = res.start;
  }

  function sanitizePaste(e){
    e.preventDefault();
    const txt = (e.clipboardData || window.clipboardData).getData('text');
    const cleaned = txt.replace(/[\t\r\n]+/g,' ').replace(/\s*,\s*/g, ', ').trim();
    document.execCommand('insertText', false, cleaned);
  }

  genBtn.addEventListener('click', generateOutput);
  clearBtn.addEventListener('click', ()=>{
    input.value='';
    stopOut.textContent='// STOP commands will appear here';
    startOut.textContent='// START commands will appear here';
  });
  input.addEventListener('paste', sanitizePaste);

  async function copyToClipboard(text, btn){
    try{
      await navigator.clipboard.writeText(text);
      btn.textContent = 'Copied!';
      setTimeout(()=>btn.textContent = btn.getAttribute('data-label') || 'Copy', 1200);
    }catch(err){
      alert('Copy failed. Please copy manually.');
    }
  }

  copyStopBtn.setAttribute('data-label','Copy Stop');
  copyStartBtn.setAttribute('data-label','Copy Start');
  copyStopBtn.addEventListener('click', ()=>copyToClipboard(stopOut.textContent, copyStopBtn));
  copyStartBtn.addEventListener('click', ()=>copyToClipboard(startOut.textContent, copyStartBtn));
})();
</script>
</body>
</html>
